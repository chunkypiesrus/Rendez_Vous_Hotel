document.addEventListener("DOMContentLoaded",function(){initCurrencyConverter()});function initCurrencyConverter(){const e=35e6,t=document.querySelector(".asking-price-container");if(!t)return;const n=document.createElement("div");n.className="currency-converter mt-4",n.innerHTML='\n        <div class="flex flex-wrap -mx-2">\n            <div class="w-1/2 px-2 mb-2">\n                <div class="currency-item" id="usd-value">\n                    <span class="currency-amount">Loading...</span>\n                    <span class="currency-code">USD</span>\n                </div>\n            </div>\n            <div class="w-1/2 px-2 mb-2">\n                <div class="currency-item" id="eur-value">\n                    <span class="currency-amount">Loading...</span>\n                    <span class="currency-code">EUR</span>\n                </div>\n            </div>\n            <div class="w-1/2 px-2 mb-2">\n                <div class="currency-item" id="gbp-value">\n                    <span class="currency-amount">Loading...</span>\n                    <span class="currency-code">GBP</span>\n                </div>\n            </div>\n            <div class="w-1/2 px-2 mb-2">\n                <div class="currency-item" id="aud-value">\n                    <span class="currency-amount">Loading...</span>\n                    <span class="currency-code">AUD</span>\n                </div>\n            </div>\n        </div>\n        <p class="text-xs text-gray-500 mt-2">\n            <span id="exchange-rate-date">Exchange rates updated: Loading...</span>\n            <button id="refresh-rates" class="ml-2 text-primary hover:underline">\n                <i class="fas fa-sync-alt"></i> Refresh\n            </button>\n        </p>\n    ',t.appendChild(n),document.getElementById("refresh-rates").addEventListener("click",function(){fetchExchangeRates(e)}),fetchExchangeRates(e)}function fetchExchangeRates(e){document.querySelectorAll(".currency-amount").forEach(e=>{e.textContent="Loading..."}),document.getElementById("exchange-rate-date").textContent="Exchange rates: Updating...";const t="https://open.er-api.com/v6/latest/THB";fetch(t).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(t=>{updateCurrencyValues(t,e)}).catch(e=>{console.error("Error fetching exchange rates:",e),document.querySelectorAll(".currency-amount").forEach(e=>{e.textContent="Error loading"}),document.getElementById("exchange-rate-date").textContent="Exchange rates: Failed to update"})}function updateCurrencyValues(e,t){if(!e||!e.rates)return void console.error("Invalid exchange rate data");const n={USD:e.rates.USD,EUR:e.rates.EUR,GBP:e.rates.GBP,AUD:e.rates.AUD},r={USD:t*n.USD,EUR:t*n.EUR,GBP:t*n.GBP,AUD:t*n.AUD};document.querySelector("#usd-value .currency-amount").textContent="$"+formatCurrency(r.USD),document.querySelector("#eur-value .currency-amount").textContent="€"+formatCurrency(r.EUR),document.querySelector("#gbp-value .currency-amount").textContent="£"+formatCurrency(r.GBP),document.querySelector("#aud-value .currency-amount").textContent="A$"+formatCurrency(r.AUD);const a=new Date(e.time_last_update_utc);document.getElementById("exchange-rate-date").textContent=`Exchange rates updated: ${a.toLocaleDateString()}`}function formatCurrency(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.round(e))}
